import "../pkl/System.pkl"

url = "https://download.zerotier.com/"
codename = "bookworm"

function installed(): Listing<System.Resource> = new Listing {
    new System.File {
        path = "/etc/apt/trusted.gpg.d/zerotier.com.gpg"
        content = new System.FileContent {
            file = "local/zerotier.com.gpg"
        }
        owner = "root"
        group = "root"
        permissions = "644"
    }

    new System.File {
        path = "/etc/apt/sources.list.d/zerotier.list"
        owner = "root"
        group = "root"
        permissions = "644"
        content = "deb [signed-by=/etc/apt/trusted.gpg.d/zerotier.com.gpg] \(url)debian/\(codename) \(codename) main"
    }
}

function enabled(): Listing<System.Resource> = new Listing {
    ...installed()
    // new Package {
    //     name = "zerotierone"
    //     status = "installed"
    // }
}